{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 18, "column": 0}, "map": {"version":3,"sources":["file:///Users/woodj/Desktop/christmas-list/src/app/list/%5BfamilyId%5D/AddGiftForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/list/[familyId]/AddGiftForm.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/list/[familyId]/AddGiftForm.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA2S,GACxU,yEACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 32, "column": 0}, "map": {"version":3,"sources":["file:///Users/woodj/Desktop/christmas-list/src/app/list/%5BfamilyId%5D/AddGiftForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/list/[familyId]/AddGiftForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/list/[familyId]/AddGiftForm.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAuR,GACpT,qDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 46, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 54, "column": 0}, "map": {"version":3,"sources":["file:///Users/woodj/Desktop/christmas-list/src/app/list/%5BfamilyId%5D/ClaimUnclaimButtons.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/list/[familyId]/ClaimUnclaimButtons.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/list/[familyId]/ClaimUnclaimButtons.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAmT,GAChV,iFACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 68, "column": 0}, "map": {"version":3,"sources":["file:///Users/woodj/Desktop/christmas-list/src/app/list/%5BfamilyId%5D/ClaimUnclaimButtons.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/list/[familyId]/ClaimUnclaimButtons.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/list/[familyId]/ClaimUnclaimButtons.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA+R,GAC5T,6DACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 82, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 90, "column": 0}, "map": {"version":3,"sources":["file:///Users/woodj/Desktop/christmas-list/src/app/list/%5BfamilyId%5D/AddMemberForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/list/[familyId]/AddMemberForm.tsx <module evaluation> from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/list/[familyId]/AddMemberForm.tsx <module evaluation>\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAA6S,GAC1U,2EACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 104, "column": 0}, "map": {"version":3,"sources":["file:///Users/woodj/Desktop/christmas-list/src/app/list/%5BfamilyId%5D/AddMemberForm.tsx/__nextjs-internal-proxy.mjs"],"sourcesContent":["// This file is generated by next-core EcmascriptClientReferenceModule.\nimport { registerClientReference } from \"react-server-dom-turbopack/server\";\nexport default registerClientReference(\n    function() { throw new Error(\"Attempted to call the default export of [project]/src/app/list/[familyId]/AddMemberForm.tsx from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.\"); },\n    \"[project]/src/app/list/[familyId]/AddMemberForm.tsx\",\n    \"default\",\n);\n"],"names":[],"mappings":"AAAA,uEAAuE;;;;;AACvE;;uCACe,IAAA,wQAAuB,EAClC;IAAa,MAAM,IAAI,MAAM;AAAyR,GACtT,uDACA","ignoreList":[0],"debugId":null}},
    {"offset": {"line": 118, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 126, "column": 0}, "map": {"version":3,"sources":["file:///Users/woodj/Desktop/christmas-list/src/app/list/%5BfamilyId%5D/page.tsx"],"sourcesContent":["import { createClient } from '@/lib/supabase-server'\nimport { redirect } from 'next/navigation'\nimport Link from 'next/link'\nimport AddGiftForm from './AddGiftForm' // Client component for adding gifts\nimport ClaimUnclaimButtons from './ClaimUnclaimButtons' // Client component for claim/unclaim buttons\nimport AddMemberForm from './AddMemberForm' // Client component for adding members\n\ninterface Gift {\n  id: string;\n  description: string;\n  is_purchased: boolean;\n  purchased_by?: string;\n  user_id: string;\n}\n\ninterface Member {\n  id: string;\n  name: string;\n  gifts: Gift[];\n}\n\ninterface Family {\n  id: string;\n  name: string;\n  owner_id: string;\n  members: Member[];\n}\n\nexport default async function FamilyListPage({ params }: { params: { familyId: string } }) {\n  if (!params.familyId) {\n    redirect('/'); // Redirect to home if familyId is not provided\n  }\n  const supabase = createClient()\n  const { data: { user } } = await supabase.auth.getUser()\n\n  if (!user) {\n    redirect('/login')\n  }\n\n  const { data: listData, error: listError } = await supabase\n    .from('lists')\n    .select('id, name, user_id, list_members(profile_id, profiles(full_name))')\n    .eq('id', params.familyId)\n    .single()\n  console.log(\"listData:\", listData);\n\n  if (listError) {\n    return <p className=\"text-red-500 text-center\">Error loading family list: {listError.message}</p>\n  }\n\n  if (!listData) {\n    return <p className=\"text-center text-gray-600\">Family list not found.</p>\n  }\n\n  const { data: itemsData, error: itemsError } = await supabase\n    .from('items')\n    .select('id, name, is_purchased, purchased_by, user_id')\n    .eq('list_id', params.familyId)\n\n  if (itemsError) {\n    return <p className=\"text-red-500 text-center\">Error loading gifts: {itemsError.message}</p>\n  }\n\n  const profileIds = new Set<string>();\n  itemsData.forEach(item => {\n    profileIds.add(item.user_id); // Recipient\n    if (item.purchased_by) {\n      profileIds.add(item.purchased_by); // Purchaser\n    }\n  });\n  profileIds.add(listData.user_id); // List owner\n\n  // Extract profiles from list_members\n  listData.list_members.forEach((lm: any) => {\n    profileIds.add(lm.profile_id);\n  });\n  console.log(\"profileIds after collecting from items, owner, and list_members:\", profileIds);\n\n  const { data: profilesData, error: profilesError } = await supabase\n    .from('profiles')\n    .select('id, full_name')\n    .in('id', Array.from(profileIds));\n  console.log(\"profilesData after fetching:\", profilesData);\n\n  if (profilesError) {\n    return <p className=\"text-red-500 text-center\">Error loading profiles: {profilesError.message}</p>\n  }\n\n  const membersMap = new Map<string, Member>();\n  profilesData.forEach(profile => {\n    membersMap.set(profile.id, {\n      id: profile.id,\n      name: profile.full_name,\n      gifts: [],\n    });\n  });\n  console.log(\"membersMap after populating:\", membersMap);\n\n  itemsData.forEach(item => {\n    const recipientMember = membersMap.get(item.user_id);\n    if (recipientMember) {\n      recipientMember.gifts.push({\n        id: item.id,\n        description: item.name,\n        is_purchased: item.is_purchased,\n        purchased_by: item.purchased_by || undefined,\n        user_id: item.user_id,\n      });\n    }\n  });\n\n  const family: Family = {\n    id: listData.id,\n    name: listData.name,\n    owner_id: listData.user_id,\n    members: Array.from(membersMap.values()),\n  };\n\n  console.log(\"Current User ID:\", user.id);\n  console.log(\"Family Members:\", family.members);\n\n  return (\n    <div className=\"px-4 py-8 mx-auto fresh-gradient min-h-screen\">\n      <div className=\"max-w-screen-lg mx-auto\">\n        <h1 className=\"text-4xl font-bold mb-4\">{family.name} Christmas List</h1>\n        <Link href=\"/\" className=\"text-blue-500 hover:underline mb-4 block\">‚Üê Back to Home</Link>\n\n        {family.members.map((member) => (\n          <div key={member.id} className=\"bg-white p-6 rounded-lg shadow-md mb-8\">\n            <h2 className=\"text-2xl font-semibold mb-4\">{member.name}'s List</h2>\n            {member.gifts.length === 0 ? (\n              <p>No gifts on {member.name}'s list yet.</p>\n            ) : (\n              <ul className=\"list-disc pl-5 space-y-2\">\n                {member.gifts.map((gift) => (\n                  <li key={gift.id} className=\"flex justify-between items-center\">\n                    <span>\n                      {gift.description}\n                      {gift.is_purchased && user.id !== gift.user_id && (\n                        <span className=\"ml-2 text-sm text-green-600\">\n                          (Claimed by {family.members.find(m => m.id === gift.purchased_by)?.name})\n                        </span>\n                      )}\n                    </span>\n                    {user && user.id !== gift.user_id && (\n                      <ClaimUnclaimButtons\n                        gift={gift}\n                        userId={user.id}\n                      />\n                    )}\n                  </li>\n                ))}\n              </ul>\n            )}\n          </div>\n        ))}\n\n        {user && (\n          <AddGiftForm\n            familyId={family.id}\n            currentUserId={user.id}\n            members={family.members}\n          />\n        )}\n\n        {user && (\n          <AddMemberForm\n            familyId={family.id}\n            currentUserId={user.id}\n            members={family.members}\n          />\n        )}\n      </div>\n    </div>\n  )\n}\n"],"names":[],"mappings":"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","debugId":null}}]
}