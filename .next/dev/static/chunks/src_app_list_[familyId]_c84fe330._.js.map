{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/woodj/Desktop/christmas-list/src/app/list/%5BfamilyId%5D/AddGiftForm.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { createClient } from '@/lib/supabase'\nimport { useRouter } from 'next/navigation'\n\ninterface Member {\n  id: string;\n  name: string;\n}\n\ninterface AddGiftFormProps {\n  familyId: string;\n  currentUserId: string;\n  members: Member[];\n}\n\nexport default function AddGiftForm({ familyId, currentUserId, members }: AddGiftFormProps) {\n  const [newGiftDescription, setNewGiftDescription] = useState('')\n  const [selectedRecipientId, setSelectedRecipientId] = useState(currentUserId) // Default to current user\n  const [message, setMessage] = useState('')\n  const supabase = createClient()\n  const router = useRouter()\n\n  const handleAddGift = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setMessage('')\n\n    if (!newGiftDescription) {\n      setMessage('Gift description is required.')\n      return\n    }\n\n    if (!selectedRecipientId) {\n      setMessage('Please select a recipient.')\n      return\n    }\n\n    const { error } = await supabase\n      .from('items')\n      .insert([{ list_id: familyId, user_id: selectedRecipientId, name: newGiftDescription }])\n\n    if (error) {\n      setMessage(`Failed to add gift: ${error.message}`)\n    } else {\n      setMessage(`Gift \"${newGiftDescription}\" added successfully!`)\n      setNewGiftDescription('')\n      router.refresh() // Refresh the current page to show the new gift\n    }\n  }\n\n  return (\n    <div className=\"mt-6 pt-4 border-t border-gray-200\">\n      <h3 className=\"text-xl font-semibold mb-3\">Add a Gift</h3>\n      {message && <p className=\"text-red-500 mb-3\">{message}</p>}\n      <form onSubmit={handleAddGift} className=\"space-y-3\">\n        <div>\n          <label htmlFor=\"recipient\" className=\"block text-sm font-medium text-gray-700\">Recipient</label>\n          <select\n            id=\"recipient\"\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            value={selectedRecipientId}\n            onChange={(e) => setSelectedRecipientId(e.target.value)}\n            required\n          >\n            {members.map((member) => (\n              <option key={member.id} value={member.id}>\n                {member.name} {member.id === currentUserId ? '(You)' : ''}\n              </option>\n            ))}\n          </select>\n        </div>\n        <div>\n          <label htmlFor=\"gift-desc\" className=\"sr-only\">\n            Gift Description\n          </label>\n          <input\n            type=\"text\"\n            id=\"gift-desc\"\n            placeholder=\"Gift description\"\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            value={newGiftDescription}\n            onChange={(e) => setNewGiftDescription(e.target.value)}\n            required\n          />\n        </div>\n        <button\n          type=\"submit\"\n          className=\"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 text-sm\"\n        >\n          Add Gift\n        </button>\n      </form>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAiBe,SAAS,YAAY,EAAE,QAAQ,EAAE,aAAa,EAAE,OAAO,EAAoB;;IACxF,MAAM,CAAC,oBAAoB,sBAAsB,GAAG,IAAA,yKAAQ,EAAC;IAC7D,MAAM,CAAC,qBAAqB,uBAAuB,GAAG,IAAA,yKAAQ,EAAC,eAAe,0BAA0B;;IACxG,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,WAAW,IAAA,yIAAY;IAC7B,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,gBAAgB,OAAO;QAC3B,EAAE,cAAc;QAChB,WAAW;QAEX,IAAI,CAAC,oBAAoB;YACvB,WAAW;YACX;QACF;QAEA,IAAI,CAAC,qBAAqB;YACxB,WAAW;YACX;QACF;QAEA,MAAM,EAAE,KAAK,EAAE,GAAG,MAAM,SACrB,IAAI,CAAC,SACL,MAAM,CAAC;YAAC;gBAAE,SAAS;gBAAU,SAAS;gBAAqB,MAAM;YAAmB;SAAE;QAEzF,IAAI,OAAO;YACT,WAAW,CAAC,oBAAoB,EAAE,MAAM,OAAO,EAAE;QACnD,OAAO;YACL,WAAW,CAAC,MAAM,EAAE,mBAAmB,qBAAqB,CAAC;YAC7D,sBAAsB;YACtB,OAAO,OAAO,IAAG,gDAAgD;QACnE;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA6B;;;;;;YAC1C,yBAAW,6LAAC;gBAAE,WAAU;0BAAqB;;;;;;0BAC9C,6LAAC;gBAAK,UAAU;gBAAe,WAAU;;kCACvC,6LAAC;;0CACC,6LAAC;gCAAM,SAAQ;gCAAY,WAAU;0CAA0C;;;;;;0CAC/E,6LAAC;gCACC,IAAG;gCACH,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,uBAAuB,EAAE,MAAM,CAAC,KAAK;gCACtD,QAAQ;0CAEP,QAAQ,GAAG,CAAC,CAAC,uBACZ,6LAAC;wCAAuB,OAAO,OAAO,EAAE;;4CACrC,OAAO,IAAI;4CAAC;4CAAE,OAAO,EAAE,KAAK,gBAAgB,UAAU;;uCAD5C,OAAO,EAAE;;;;;;;;;;;;;;;;kCAM5B,6LAAC;;0CACC,6LAAC;gCAAM,SAAQ;gCAAY,WAAU;0CAAU;;;;;;0CAG/C,6LAAC;gCACC,MAAK;gCACL,IAAG;gCACH,aAAY;gCACZ,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,sBAAsB,EAAE,MAAM,CAAC,KAAK;gCACrD,QAAQ;;;;;;;;;;;;kCAGZ,6LAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT;GA9EwB;;QAKP,kJAAS;;;KALF","debugId":null}},
    {"offset": {"line": 182, "column": 0}, "map": {"version":3,"sources":["file:///Users/woodj/Desktop/christmas-list/src/app/list/%5BfamilyId%5D/ClaimUnclaimButtons.tsx"],"sourcesContent":["'use client'\n\nimport { createClient } from '@/lib/supabase'\nimport { useRouter } from 'next/navigation'\nimport { useState } from 'react'\n\ninterface Gift {\n  id: string;\n  description: string;\n  is_purchased: boolean;\n  purchased_by?: string;\n  user_id: string;\n}\n\ninterface ClaimUnclaimButtonsProps {\n  gift: Gift;\n  userId: string;\n}\n\nexport default function ClaimUnclaimButtons({ gift, userId }: ClaimUnclaimButtonsProps) {\n  const [message, setMessage] = useState('')\n  const router = useRouter()\n\n  const handleClaimGift = async () => {\n    setMessage('')\n    const res = await fetch(`/api/gifts/${gift.id}/claim`, {\n      method: 'PATCH',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ claimedByUserId: userId }),\n    })\n\n    if (res.ok) {\n      setMessage('Gift claimed successfully!')\n      router.refresh()\n    } else {\n      const errorText = await res.text()\n      setMessage(`Failed to claim gift: ${errorText}`)\n    }\n  }\n\n  const handleUnclaimGift = async () => {\n    setMessage('')\n    const res = await fetch(`/api/gifts/${gift.id}/unclaim`, {\n      method: 'PATCH', // Changed to PATCH as per API route\n      headers: { 'Content-Type': 'application/json' },\n    })\n\n    if (res.ok) {\n      setMessage('Gift unclaimed successfully!')\n      router.refresh()\n    } else {\n      const errorText = await res.text()\n      setMessage(`Failed to unclaim gift: ${errorText}`)\n    }\n  }\n\n  return (\n    <div>\n      {message && <p className=\"text-red-500 text-sm mb-2\">{message}</p>}\n      {!gift.is_purchased && (\n        <button\n          onClick={handleClaimGift}\n          className=\"ml-4 px-3 py-1 bg-purple-600 text-white rounded-md hover:bg-purple-700 text-sm\"\n        >\n          Claim\n        </button>\n      )}\n      {gift.is_purchased && gift.purchased_by === userId && (\n        <button\n          onClick={handleUnclaimGift}\n          className=\"ml-4 px-3 py-1 bg-yellow-600 text-white rounded-md hover:bg-yellow-700 text-sm\"\n        >\n          Unclaim\n        </button>\n      )}\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAGA;AACA;;;AAJA;;;AAmBe,SAAS,oBAAoB,EAAE,IAAI,EAAE,MAAM,EAA4B;;IACpF,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,kBAAkB;QACtB,WAAW;QACX,MAAM,MAAM,MAAM,MAAM,CAAC,WAAW,EAAE,KAAK,EAAE,CAAC,MAAM,CAAC,EAAE;YACrD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;YAC9C,MAAM,KAAK,SAAS,CAAC;gBAAE,iBAAiB;YAAO;QACjD;QAEA,IAAI,IAAI,EAAE,EAAE;YACV,WAAW;YACX,OAAO,OAAO;QAChB,OAAO;YACL,MAAM,YAAY,MAAM,IAAI,IAAI;YAChC,WAAW,CAAC,sBAAsB,EAAE,WAAW;QACjD;IACF;IAEA,MAAM,oBAAoB;QACxB,WAAW;QACX,MAAM,MAAM,MAAM,MAAM,CAAC,WAAW,EAAE,KAAK,EAAE,CAAC,QAAQ,CAAC,EAAE;YACvD,QAAQ;YACR,SAAS;gBAAE,gBAAgB;YAAmB;QAChD;QAEA,IAAI,IAAI,EAAE,EAAE;YACV,WAAW;YACX,OAAO,OAAO;QAChB,OAAO;YACL,MAAM,YAAY,MAAM,IAAI,IAAI;YAChC,WAAW,CAAC,wBAAwB,EAAE,WAAW;QACnD;IACF;IAEA,qBACE,6LAAC;;YACE,yBAAW,6LAAC;gBAAE,WAAU;0BAA6B;;;;;;YACrD,CAAC,KAAK,YAAY,kBACjB,6LAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;YAIF,KAAK,YAAY,IAAI,KAAK,YAAY,KAAK,wBAC1C,6LAAC;gBACC,SAAS;gBACT,WAAU;0BACX;;;;;;;;;;;;AAMT;GA1DwB;;QAEP,kJAAS;;;KAFF","debugId":null}},
    {"offset": {"line": 283, "column": 0}, "map": {"version":3,"sources":["file:///Users/woodj/Desktop/christmas-list/src/app/list/%5BfamilyId%5D/AddMemberForm.tsx"],"sourcesContent":["'use client'\n\nimport { useState } from 'react'\nimport { createClient } from '@/lib/supabase'\nimport { useRouter } from 'next/navigation'\n\ninterface AddMemberFormProps {\n  familyId: string;\n  currentUserId: string;\n  members: { id: string; name: string }[];\n}\n\nexport default function AddMemberForm({ familyId, currentUserId, members }: AddMemberFormProps) {\n  const [newMemberName, setNewMemberName] = useState('')\n  const [newMemberEmail, setNewMemberEmail] = useState('') // Assuming email for finding user ID\n  const [message, setMessage] = useState('')\n  const supabase = createClient()\n  const router = useRouter()\n\n  const handleAddMember = async (e: React.FormEvent) => {\n    e.preventDefault()\n    setMessage('')\n\n    console.log(\"Attempting to add member:\", { newMemberName, newMemberEmail, familyId, currentUserId });\n\n    if (!newMemberName || !newMemberEmail) {\n      setMessage('Member name and email are required.')\n      return\n    }\n\n    // First, check if the current user is part of this family list\n    const isCurrentUserMember = members.some(member => member.id === currentUserId);\n    if (!isCurrentUserMember) {\n      setMessage('You must be a member of this list to add new members.');\n      return;\n    }\n\n    try {\n      const res = await fetch(`/api/family/${familyId}/members`, {\n        method: 'POST',\n        headers: { 'Content-Type': 'application/json' },\n        body: JSON.stringify({ memberName: newMemberName, memberEmail: newMemberEmail }),\n      });\n\n      console.log(\"API response status:\", res.status);\n      const data = await res.json();\n      console.log(\"API response data:\", data);\n\n      if (res.ok) {\n        setMessage(data.message);\n        setNewMemberName('');\n        setNewMemberEmail('');\n        router.refresh(); // Refresh the page to show the new member in the dropdowns\n      } else {\n        setMessage(`Failed to add member: ${data.error}`);\n      }\n    } catch (error: any) {\n      setMessage(`Error adding member: ${error.message}`);\n      console.error(\"Error during add member fetch:\", error);\n    }\n  }\n\n  return (\n    <div className=\"mt-8 p-6 bg-white rounded-lg shadow-md\">\n      <h3 className=\"text-2xl font-semibold mb-4\">Add New Family Member</h3>\n      {message && <p className=\"text-red-500 mb-4\">{message}</p>}\n      <form onSubmit={handleAddMember} className=\"space-y-4\">\n        <div>\n          <label htmlFor=\"newMemberName\" className=\"block text-sm font-medium text-gray-700\">Member Name</label>\n          <input\n            type=\"text\"\n            id=\"newMemberName\"\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            value={newMemberName}\n            onChange={(e) => setNewMemberName(e.target.value)}\n            required\n          />\n        </div>\n        <div>\n          <label htmlFor=\"newMemberEmail\" className=\"block text-sm font-medium text-gray-700\">Member Email</label>\n          <input\n            type=\"email\"\n            id=\"newMemberEmail\"\n            className=\"mt-1 block w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 sm:text-sm\"\n            value={newMemberEmail}\n            onChange={(e) => setNewMemberEmail(e.target.value)}\n            required\n          />\n        </div>\n        <button\n          type=\"submit\"\n          className=\"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 text-sm\"\n        >\n          Add Member\n        </button>\n      </form>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAYe,SAAS,cAAc,EAAE,QAAQ,EAAE,aAAa,EAAE,OAAO,EAAsB;;IAC5F,MAAM,CAAC,eAAe,iBAAiB,GAAG,IAAA,yKAAQ,EAAC;IACnD,MAAM,CAAC,gBAAgB,kBAAkB,GAAG,IAAA,yKAAQ,EAAC,IAAI,qCAAqC;;IAC9F,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IACvC,MAAM,WAAW,IAAA,yIAAY;IAC7B,MAAM,SAAS,IAAA,kJAAS;IAExB,MAAM,kBAAkB,OAAO;QAC7B,EAAE,cAAc;QAChB,WAAW;QAEX,QAAQ,GAAG,CAAC,6BAA6B;YAAE;YAAe;YAAgB;YAAU;QAAc;QAElG,IAAI,CAAC,iBAAiB,CAAC,gBAAgB;YACrC,WAAW;YACX;QACF;QAEA,+DAA+D;QAC/D,MAAM,sBAAsB,QAAQ,IAAI,CAAC,CAAA,SAAU,OAAO,EAAE,KAAK;QACjE,IAAI,CAAC,qBAAqB;YACxB,WAAW;YACX;QACF;QAEA,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,YAAY,EAAE,SAAS,QAAQ,CAAC,EAAE;gBACzD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,YAAY;oBAAe,aAAa;gBAAe;YAChF;YAEA,QAAQ,GAAG,CAAC,wBAAwB,IAAI,MAAM;YAC9C,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,QAAQ,GAAG,CAAC,sBAAsB;YAElC,IAAI,IAAI,EAAE,EAAE;gBACV,WAAW,KAAK,OAAO;gBACvB,iBAAiB;gBACjB,kBAAkB;gBAClB,OAAO,OAAO,IAAI,2DAA2D;YAC/E,OAAO;gBACL,WAAW,CAAC,sBAAsB,EAAE,KAAK,KAAK,EAAE;YAClD;QACF,EAAE,OAAO,OAAY;YACnB,WAAW,CAAC,qBAAqB,EAAE,MAAM,OAAO,EAAE;YAClD,QAAQ,KAAK,CAAC,kCAAkC;QAClD;IACF;IAEA,qBACE,6LAAC;QAAI,WAAU;;0BACb,6LAAC;gBAAG,WAAU;0BAA8B;;;;;;YAC3C,yBAAW,6LAAC;gBAAE,WAAU;0BAAqB;;;;;;0BAC9C,6LAAC;gBAAK,UAAU;gBAAiB,WAAU;;kCACzC,6LAAC;;0CACC,6LAAC;gCAAM,SAAQ;gCAAgB,WAAU;0CAA0C;;;;;;0CACnF,6LAAC;gCACC,MAAK;gCACL,IAAG;gCACH,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,iBAAiB,EAAE,MAAM,CAAC,KAAK;gCAChD,QAAQ;;;;;;;;;;;;kCAGZ,6LAAC;;0CACC,6LAAC;gCAAM,SAAQ;gCAAiB,WAAU;0CAA0C;;;;;;0CACpF,6LAAC;gCACC,MAAK;gCACL,IAAG;gCACH,WAAU;gCACV,OAAO;gCACP,UAAU,CAAC,IAAM,kBAAkB,EAAE,MAAM,CAAC,KAAK;gCACjD,QAAQ;;;;;;;;;;;;kCAGZ,6LAAC;wBACC,MAAK;wBACL,WAAU;kCACX;;;;;;;;;;;;;;;;;;AAMT;GAtFwB;;QAKP,kJAAS;;;KALF","debugId":null}}]
}